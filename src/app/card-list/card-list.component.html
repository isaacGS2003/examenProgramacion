<!-- src/app/components/card-list/card-list.component.html -->
<div class="container my-4">
  <div class="row g-4">
    <div class="col-sm-6 col-lg-4" *ngFor="let item of items">
      <div class="card h-100 character-card">
        <div class="card-img-wrapper">
          <!-- Loader -->
          <div *ngIf="isLoading(item.image)" class="loader-container">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" width="200" height="200" style="shape-rendering: auto; display: block; background: rgb(255, 255, 255);">
              <g>
                <circle stroke-linecap="round" fill="none" stroke-dasharray="50.26548245743669 50.26548245743669" stroke="#5b7be1" stroke-width="8" r="32" cy="50" cx="50">
                  <animateTransform values="0 50 50;360 50 50" keyTimes="0;1" repeatCount="indefinite" dur="1s" type="rotate" attributeName="transform"></animateTransform>
                </circle>
                <circle stroke-linecap="round" fill="none" stroke-dashoffset="36.12831551628262" stroke-dasharray="36.12831551628262 36.12831551628262" stroke="#f86a6a" stroke-width="8" r="23" cy="50" cx="50">
                  <animateTransform values="0 50 50;-360 50 50" keyTimes="0;1" repeatCount="indefinite" dur="1s" type="rotate" attributeName="transform"></animateTransform>
                </circle>
              </g>
            </svg>
          </div>
          <!-- Imagen -->
          <div class="img-container">
            <img [src]="item.image"
                 [alt]="item.name"
                 class="card-img"
                 (error)="onImageError($event, item.image)"
                 (load)="onImageLoad(item.image)">
          </div>
          <div class="card-img-overlay">
            <span class="badge bg-warning">{{item.race}}</span>
          </div>
        </div>
        
        <div class="card-body d-flex flex-column">
          <h5 class="card-title text-center mb-3">{{item.name}}</h5>
          <p class="card-text flex-grow-1">{{truncateText(item.description)}}</p>
          <div class="card-footer bg-transparent border-0 pt-3">
            <div class="d-flex justify-content-between align-items-center">
              <span class="power-level">
                <i class="fas fa-bolt text-sucess"></i> {{item.ki}}
              </span>
              
              <button class="btn btn-warning rounded-pill" (click)="onCardClick(item)">
                MÃ¡s Info <i class="fas fa-chevron-right ms-1"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>